<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”® éš¨ç·£å ‚ | çŸ¥å‘½éš¨ç·£ï¼Œå‰µé€ ç„¡é™</title>
    
    <style>
        /* CSS è®Šæ•¸ï¼šå¼•å…¥æ–°çš„å“å‘³é…è‰² */
        :root {
            --primary-color: #5d35b6; /* ä¸»ç´«è‰² (æ™ºæ…§) */
            --secondary-color: #7c4dff; /* äº®ç´«è‰² */
            --red-accent: #c62828; /* ä¸­åœ‹ç´… (å¼·èª¿/ç†±æƒ…) */
            --bg-light: #f8f7ff;
            --text-dark: #333;
            --text-light: white;
            --card-bg: #fff;
            --shadow-subtle: 0 4px 12px rgba(0, 0, 0, 0.08); /* æŸ”å’Œé™°å½± */
        }
        /* ... [CSS æ¨£å¼å¾é€™è£¡é–‹å§‹ï¼Œå…¨éƒ¨ä¿æŒ V3.0 æœ€çµ‚ç‰ˆç¨‹å¼ç¢¼ä¸è®Š] ... */
        /* ç‚ºç¯€çœç¯‡å¹…ï¼ŒCSS æ¨£å¼è«‹åƒç…§ä¸Šä¸€è¼ªæä¾›çš„ V3.0 ç¨‹å¼ç¢¼ */
        /* ... [CSS æ¨£å¼åˆ°é€™è£¡çµæŸ] ... */
        body { 
            font-family: 'Noto Sans TC', 'Microsoft JhengHei', Arial, sans-serif; 
            margin: 0; 
            padding: 0; 
            background-color: var(--bg-light); 
            color: var(--text-dark); 
            line-height: 1.8; 
            scroll-behavior: smooth; 
        }
        header { 
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); 
            color: var(--text-light); 
            padding: 40px 0; 
            text-align: center; 
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2); 
        }
        /* (å…¶ä»– CSS æ¨£å¼çœç•¥...) */
    </style>

    <script>
        // === JavaScript: å…«å­—æ’ç›¤æ¼”ç®—æ³• (V3.0 ä¿®æ­£ç‰ˆ) ===
        const TIAN_GAN = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"];
        const DI_ZHI = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"];

        // 1. æ—¥æŸ±å¹²æ”¯è¨ˆç®—
        function calculateDayGanZhi(dateStr) {
            const dateFromEpoch = new Date(dateStr);
            const epoch = new Date('1899-12-31');
            const days = Math.floor((dateFromEpoch - epoch) / (1000 * 60 * 60 * 24));
            const ganIndex = (5 + days) % 10;
            const zhiIndex = (11 + days) % 12;
            return { gan: TIAN_GAN[ganIndex], zhi: DI_ZHI[zhiIndex] };
        }

        // 2. å¹´æŸ±å¹²æ”¯è¨ˆç®—
        function calculateYearGanZhi(year) {
            const offsetYear = year - 1984;
            const ganIndex = (offsetYear % 10 + 10) % 10;
            const zhiIndex = (offsetYear % 12 + 12) % 12;
            return { gan: TIAN_GAN[ganIndex], zhi: DI_ZHI[zhiIndex] };
        }

        // 3. æ™‚æŸ±å¹²æ”¯è¨ˆç®— (äº”é¼ éæ—¥æ­Œä¿®æ­£ç‰ˆ)
        function calculateHourGanZhi(dayGan, timeStr) {
            const hour = parseInt(timeStr.split(':')[0]);
            let hourZhiIndex;
            if (hour >= 23 || hour < 1) { 
                hourZhiIndex = 0; // å­æ™‚
            } else {
                hourZhiIndex = Math.floor((hour + 1) / 2) % 12;
            }
            const hourZhi = DI_ZHI[hourZhiIndex];

            const dayGanMap = { "ç”²": 0, "å·±": 0, "ä¹™": 2, "åºš": 2, "ä¸™": 4, "è¾›": 4, "ä¸": 6, "å£¬": 6, "æˆŠ": 8, "ç™¸": 8 };
            const zishiGanIndex = dayGanMap[dayGan]; 
            const hourGanIndex = (zishiGanIndex + hourZhiIndex) % 10;
            const hourGan = TIAN_GAN[hourGanIndex]; 

            return { gan: hourGan, zhi: hourZhi };
        }
        
        // 4. æœˆæŸ±å¹²æ”¯è¨ˆç®— (ç°¡åŒ–ç‰ˆ)
        function calculateMonthGanZhi(year, month) {
            const yearGan = calculateYearGanZhi(year).gan;
            const yearGanMap = { "ç”²": 2, "å·±": 2, "ä¹™": 4, "åºš": 4, "ä¸™": 6, "è¾›": 6, "ä¸": 8, "å£¬": 8, "æˆŠ": 0, "ç™¸": 0 };

            const zhiIndex = (month + 10) % 12; // 1æœˆ=ä¸‘, 2æœˆ=å¯…...
            const monthZhi = DI_ZHI[zhiIndex];
            
            const yinYueGanIndex = yearGanMap[yearGan]; 
            const monthGanIndex = (yinYueGanIndex + zhiIndex - 2 + 10) % 10; // å¯…ç‚ºç¬¬äºŒæ”¯
            const monthGan = TIAN_GAN[monthGanIndex];

            return { gan: monthGan, zhi: monthZhi };
        }


        // 5. æ•´åˆé¡¯ç¤ºå‡½æ•¸ (è¢«æŒ‰éˆ•å‘¼å«)
        function generateBazi() {
            const dateStr = document.getElementById('birthDate').value;
            const timeStr = document.getElementById('birthTime').value;
            const resultDiv = document.getElementById('baziResult');
            
            try {
                if (!dateStr || !timeStr) {
                    resultDiv.innerHTML = '<p style="color: var(--red-accent); font-weight: bold;">è«‹è¼¸å…¥å®Œæ•´çš„å‡ºç”Ÿæ—¥æœŸå’Œæ™‚é–“ï¼</p>';
                    return;
                }

                const date = new Date(dateStr);
                const year = date.getFullYear();
                const month = date.getMonth() + 1;

                const dayGanZhi = calculateDayGanZhi(dateStr);
                const yearGanZhi = calculateYearGanZhi(year);
                const hourGanZhi = calculateHourGanZhi(dayGanZhi.gan, timeStr);
                const monthGanZhi = calculateMonthGanZhi(year, month); 

                const mockResult = `
                    <h4 style="color: var(--red-accent); font-size: 1.4em; text-align: center;">âœ… å…«å­—æ’ç›¤çµæœ (ç³»çµ±è¨ˆç®—ç‰ˆ)</h4>
                    <p style="text-align: center;">
                        <strong>æ—¥ä¸»ï¼ˆå‘½ä¸»ï¼‰ç‚ºï¼š</strong><strong style="color: var(--primary-color); font-size: 1.5em;">${dayGanZhi.gan}</strong>
                        <span style="display: block; font-size: 0.9em; color: #777;">ï¼ˆæ‚¨çš„æ ¸å¿ƒå€‹æ€§èˆ‡æœ¬è³ªï¼‰</span>
                    </p>
                    <table class="bazi-table">
                        <tr><th>æŸ±</th><th>å¹´æŸ±</th><th>æœˆæŸ±</th><th>æ—¥æŸ±</th><th>æ™‚æŸ±</th></tr>
                        <tr><td>å¤©å¹²</td><td>${yearGanZhi.gan}</td><td>${monthGanZhi.gan}</td><td>${dayGanZhi.gan}</td><td>${hourGanZhi.gan}</td></tr>
                        <tr><td>åœ°æ”¯</td><td>${yearGanZhi.zhi}</td><td>${monthGanZhi.zhi}</td><td>${dayGanZhi.zhi}</td><td>${hourGanZhi.zhi}</td></tr>
                    </table>
                    <p style="margin-top: 20px; font-style: italic; color: #00796b;">
                        *æ³¨æ„ï¼šæ™‚æŸ±é‚è¼¯ (äº”é¼ éæ—¥æ­Œ) å·²ä¿®æ­£ç‚ºç²¾ç¢ºç‰ˆã€‚
                    </p>
                `;
                
                resultDiv.innerHTML = mockResult;
            } catch(e) {
                // å¦‚æœè¨ˆç®—å‡ºéŒ¯ï¼Œé¡¯ç¤ºéŒ¯èª¤ä¿¡æ¯
                resultDiv.innerHTML = `<p style="color: var(--red-accent); font-weight: bold;">å…«å­—æ’ç›¤è¨ˆç®—å¤±æ•—ï¼è«‹æª¢æŸ¥æ—¥æœŸæ˜¯å¦æ­£ç¢ºã€‚</p><p style="font-size: 0.8em; color: #777;">éŒ¯èª¤è©³æƒ…: ${e.message}</p>`;
            }
        }

        // é é¢è¼‰å…¥æ™‚æª¢æŸ¥ URL ä¸­çš„éŒ¨é»
        document.addEventListener('DOMContentLoaded', () => {
            if (window.location.hash === '#booking-success') {
                const successDiv = document.getElementById('booking-success');
                if (successDiv) {
                    successDiv.style.display = 'block';
                    // æ²å‹•åˆ°æˆåŠŸè¨Šæ¯ä½ç½®
                    document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
                }
            }
        });

    </script>
</head>

<body>

    <header>
        <h1>ğŸ”® éš¨ç·£å ‚ | çŸ¥å‘½éš¨ç·£ï¼Œå‰µé€ ç„¡é™</h1>
        <p>èåˆæ±æ–¹æ™ºæ…§èˆ‡ç¾ä»£ç§‘æŠ€çš„å‘½ç†æ¢ç´¢å¹³å°</p>
    </header>

    <nav>
        <a href="#home">é¦–é </a>
        <a href="#bazi-tool">å…«å­—æ’ç›¤ (æ ¸å¿ƒ)</a>
        <a href="#articles">å‘½ç†æ–‡ç« </a>
        <a href="#booking">é ç´„è«®è©¢</a>
        <a href="#about">é—œæ–¼æˆ‘å€‘</a>
    </nav>

    <div class="container" id="home">
        </div>

    <div class="container" id="bazi-tool">
        <h2 id="section-bazi">ğŸ› ï¸ å…«å­—å‘½ç›¤åˆ†æå·¥å…·</h2>
        <p style="text-align: center; color: var(--red-accent); font-weight: bold;">è«‹å‹™å¿…è¼¸å…¥**é™½æ›†**æ—¥æœŸèˆ‡**ç²¾ç¢º**æ™‚é–“ï¼Œä»¥ç¢ºä¿æ’ç›¤çš„æº–ç¢ºæ€§ã€‚</p>
        <div class="tool-box">
            <form id="baziForm">
                <label for="birthDate">å‡ºç”Ÿæ—¥æœŸ (é™½æ›†)ï¼š</label>
                <input type="date" id="birthDate" required>

                <label for="birthTime">å‡ºç”Ÿæ™‚é–“ (24å°æ™‚åˆ¶)ï¼š</label>
                <input type="time" id="birthTime" required>
                
                <button type="button" onclick="generateBazi()">é¡¯ç¤ºå…«å­—æ’ç›¤</button>
            </form>
        </div>

        <div class="result-panel" id="baziResult" style="padding: 20px; margin-top: 20px;">
            è«‹è¼¸å…¥æ—¥æœŸèˆ‡æ™‚é–“å¾Œï¼Œé»æ“ŠæŒ‰éˆ•é€²è¡Œæ’ç›¤ã€‚
        </div>
    </div>
    
    <div class="container" id="booking">
        <h2 id="section-booking">ğŸ“ é ç´„è«®è©¢ç³»çµ±</h2>
        <p style="text-align: center;">è«‹å¡«å¯«æ‚¨çš„è³‡è¨Šï¼Œæˆ‘å€‘å°‡åœ¨ 24 å°æ™‚å…§å›è¦†æ‚¨ï¼Œå®‰æ’æœ€é©åˆçš„è«®è©¢æœå‹™ã€‚</p>
        
        <div class="tool-box" style="background-color: #fbecec;">
            <form action="https://formspree.io/f/mqkvnqqe" method="POST"> 
                
                <p style="color: var(--red-accent); font-weight: bold;">[è«‹æ³¨æ„] é¦–æ¬¡æäº¤å¾Œï¼Œè«‹åˆ° jackkok1388@gmail.com ä¿¡ç®±é»æ“Š Formspree ç¢ºèªé€£çµï¼</p>
                
                <label for="name">æ‚¨çš„å§“åï¼š</label>
                <input type="text" name="name" id="name" required>

                <label for="email">æ‚¨çš„ Emailï¼š</label>
                <input type="email" name="_replyto" id="email" required placeholder="æˆ‘å€‘å°‡å›è¦†åˆ°æ­¤ä¿¡ç®±">
                
                <label for="service">è«®è©¢æœå‹™é¡å‹ï¼š</label>
                <input type="text" name="service" id="service" list="services" required placeholder="ä¾‹å¦‚ï¼šå…«å­—äº‹æ¥­åˆ†æã€æ„Ÿæƒ…åˆå©š">
                <datalist id="services">
                    <option value="å…«å­—äº‹æ¥­åˆ†æ">
                    <option value="æ„Ÿæƒ…åˆå©š/æ“‡æ—¥">
                    <option value="æµå¹´é‹å‹¢è©³è§£">
                    <option value="é™½å®…é¢¨æ°´ä½ˆå±€">
                </datalist>

                <label for="message">æ‚¨æƒ³è«®è©¢çš„ä¸»è¦å•é¡Œï¼š</label>
                <textarea name="message" id="message" rows="4" required></textarea>

                <input type="hidden" name="_next" value="https://artisticmagpkj54-oss.github.io/suiyuantang-mvp/#booking-success" />
                
                <button type="submit" style="background-color: #4CAF50;">ğŸ“§ ç¢ºèªé ç´„ä¸¦é€å‡º</button>
            </form>
        </div>

        <div id="booking-success" style="padding: 20px; border: 3px solid green; background-color: #e8f5e9; border-radius: 8px; margin-top: 30px; display: none;">
            <h3>é ç´„æˆåŠŸï¼</h3>
            <p>æ‚¨çš„é ç´„è³‡æ–™å·²æˆåŠŸé€å‡ºã€‚æˆ‘å€‘å·²å°‡è³‡æ–™ç™¼é€åˆ° jackkok1388@gmail.comã€‚</p>
            <p>æˆ‘å€‘å°‡å„˜å¿«å¯©æ ¸ä¸¦å›è¦†æ‚¨ï¼Œè«‹ç•™æ„æ‚¨çš„é›»å­éƒµä»¶ï¼ˆåŒ…æ‹¬åƒåœ¾éƒµä»¶å¤¾ï¼‰ã€‚</p>
            <a href="#home" style="color: var(--primary-color); font-weight: bold;">â†’ è¿”å›é¦–é </a>
        </div>
    </div>


    <div class="container" id="articles">
        </div>


    <div class="container" id="about">
        </div>

    <footer>
        &copy; 2025 éš¨ç·£å ‚ç‰ˆæ¬Šæ‰€æœ‰ | ç¶²ç«™å·²å‡ç´š V3.1 ä¿®æ­£ç‰ˆã€‚
    </footer>

</body>
</html>
