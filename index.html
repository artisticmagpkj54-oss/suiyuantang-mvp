<footer>
        &copy; 2025 隨緣堂版權所有 | 網站美化與功能由 AI 助理完成。
    </footer>

    <script>
        // === JavaScript: 八字排盤演算法 (保持不變) ===
        const TIAN_GAN = ["甲", "乙", "丙", "丁", "戊", "己", "庚", "辛", "壬", "癸"];
        const DI_ZHI = ["子", "丑", "寅", "卯", "辰", "巳", "午", "未", "申", "酉", "戌", "亥"];

        // ... [所有 calculateDayGanZhi, calculateYearGanZhi, calculateHourGanZhi, generateBazi 函式內容保持不變] ...
        
        // 為了節省篇幅，這四個函式的內容請使用上一輪終極美化版的程式碼！

        function generateBazi() {
            try {
                const dateStr = document.getElementById('birthDate').value;
                const timeStr = document.getElementById('birthTime').value;
                const resultDiv = document.getElementById('baziResult');
                
                if (!dateStr || !timeStr) {
                    resultDiv.innerHTML = '<p style="color: red;">請輸入完整的出生日期和時間！</p>';
                    return;
                }

                // ... [計算邏輯] ...

                const date = new Date(dateStr);
                const year = date.getFullYear();

                const dayGanZhi = calculateDayGanZhi(dateStr);
                const yearGanZhi = calculateYearGanZhi(year);
                const monthGan = '庚'; 
                const monthZhi = '子'; 
                const hourGanZhi = calculateHourGanZhi(dayGanZhi.gan, timeStr);

                const mockResult = `
                    <h4>✅ 八字排盤結果 (MVP 程式碼版)</h4>
                    <p>日主（命主）為：<strong style="color: #d946ef; font-size: 1.2em;">${dayGanZhi.gan}</strong></p>
                    <table class="bazi-table">
                        <tr><th>柱</th><th>年柱</th><th>月柱</th><th>日柱</th><th>時柱</th></tr>
                        <tr><td>天干</td><td>${yearGanZhi.gan}</td><td>${monthGan}</td><td>${dayGanZhi.gan}</td><td>${hourGanZhi.gan}</td></tr>
                        <tr><td>地支</td><td>${yearGanZhi.zhi}</td><td>${monthZhi}</td><td>${dayGanZhi.zhi}</td><td>${hourGanZhi.zhi}</td></tr>
                    </table>
                `;
                
                resultDiv.innerHTML = mockResult;

            } catch(e) {
                document.getElementById('baziResult').innerHTML = `<p style="color:red; font-weight:bold;">程式碼計算錯誤：${e.message}</p>`;
            }
        }


        // === JavaScript: 內容切換與文章顯示邏輯 (單頁應用) ===
        
        // 確保在載入時運行一次，顯示首頁
        showSection('home'); 

        function showSection(sectionId) {
            try {
                document.querySelectorAll('.content-section').forEach(section => {
                    section.style.display = 'none';
                });
                document.getElementById(sectionId).style.display = 'block';

                if (sectionId === 'articles') {
                    document.getElementById('article-list-container').style.display = 'block';
                    document.getElementById('article-content-wrapper').style.display = 'none';
                }
                window.scrollTo(0, 0);

            } catch(e) {
                // 如果點擊失敗，在頁面頂部顯示錯誤訊息
                alert("網站內容切換程式碼運行錯誤！問題原因：" + e.message);
            }
        }

        function loadArticle(articleId) {
            try {
                document.getElementById('article-list-container').style.display = 'none';
                document.getElementById('article-content-wrapper').style.display = 'block';
                
                document.querySelectorAll('.article-content').forEach(content => {
                    content.style.display = 'none';
                });

                document.getElementById(articleId).style.display = 'block';
                window.scrollTo(0, 0);

            } catch(e) {
                alert("文章載入程式碼運行錯誤！問題原因：" + e.message);
            }
        }

        
    </script>
</body>
</html>
